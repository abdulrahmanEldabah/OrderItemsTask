<div class="container mx-auto p-4 max-w-4xl">
  <h2 class="text-2xl font-bold mb-4">ðŸ›’ Submit Item Order</h2>

  <!-- Order Form -->
  <div class="bg-white shadow rounded-lg p-6 mb-6 border">
    <form [formGroup]="orderForm" (ngSubmit)="addItemToOrder()" class="grid grid-cols-1 gap-4 sm:grid-cols-2">
      <!-- Item selection -->
      <div class="col-span-full">
        <label for="item" class="block font-semibold">Item</label>
        <select formControlName="itemId" id="item" class="w-full p-2 border rounded" required>
          <option value="">-- Select Item --</option>
          <option *ngFor="let item of items" [value]="item.id">
            {{ item.name }} - ${{ item.price }}
          </option>
        </select>
        <p *ngIf="orderForm.get('itemId')?.invalid && orderForm.get('itemId')?.touched" class="text-red-600 text-sm mt-1">
          Item is required.
        </p>
      </div>

      <!-- Quantity -->
      <div>
        <label for="quantity" class="block font-semibold">Quantity</label>
        <input type="number" formControlName="quantity" id="quantity" min="1" class="w-full p-2 border rounded" required />
        <p *ngIf="orderForm.get('quantity')?.invalid && orderForm.get('quantity')?.touched" class="text-red-600 text-sm mt-1">
          Quantity must be at least 1.
        </p>
      </div>

      <!-- Add button -->
      <div class="flex items-end">
        <button type="submit" [disabled]="orderForm.invalid" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">
          âž• Add Item
        </button>
      </div>
    </form>
  </div>

  <!-- Order Items Table -->
  <div class="bg-white shadow rounded-lg p-6 mb-6 border">
    <h3 class="text-xl font-semibold mb-4">ðŸ§¾ Current Order</h3>

    <div *ngIf="!orderItems?.length" class="text-gray-500">
      No items in the order yet. Add items to create an order.
    </div>

    <div *ngIf="orderItems.length > 0" class="overflow-x-auto">
      <table class="min-w-full text-sm border border-gray-300 rounded order-table">
        <thead class="bg-gray-100 font-semibold">
          <tr>
            <th class="px-4 py-2 text-left">#</th>
            <th class="px-4 py-2 text-left">Item</th>
            <th class="px-4 py-2 text-left">Price</th>
            <th class="px-4 py-2 text-left">Quantity</th>
            <th class="px-4 py-2 text-left">Total</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of orderItems; let i = index" class="hover:bg-gray-50">
            <td class="px-4 py-2">{{ i + 1 }}</td>
            <td class="px-4 py-2">{{ item.itemName }}</td>
            <td class="px-4 py-2">${{ item.price }}</td>
            <td class="px-4 py-2">{{ item.quantity }}</td>
            <td class="px-4 py-2 font-semibold text-green-600">${{ item.total }}</td>
          </tr>
        </tbody>
      </table>

      <!-- Save Order Button -->
      <div class="mt-4 text-right">
        <button (click)="submitOrder()" class="bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700 transition">
          ðŸ’¾ Save Order
        </button>
      </div>
    </div>
  </div>

  <!-- Saved Orders -->
  <div>
    <h3 class="text-xl font-semibold mb-4">ðŸ“¦ Saved Orders</h3>
    <div *ngIf="!savedOrders.length" class="text-gray-500 mb-4">
      No orders saved yet.
    </div>

    <div *ngIf="savedOrders.length > 0" class="overflow-x-auto">
      <table class="min-w-full text-sm border border-gray-300 rounded order-table">
        <thead class="bg-gray-100 font-semibold">
          <tr>
            <th class="px-4 py-2 text-left">#</th>
            <th class="px-4 py-2 text-left">Order Number</th>
            <th class="px-4 py-2 text-left">Total Price</th>
            <th class="px-4 py-2 text-left">Items</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let order of savedOrders; let i = index" class="hover:bg-gray-50">
            <td class="px-4 py-2">{{ i + 1 }}</td>
            <td class="px-4 py-2 font-semibold text-blue-600">#{{ order.orderNumber }}</td>
            <td class="px-4 py-2 text-green-600 font-semibold">${{ order.totalPrice }}</td>
            <td class="px-4 py-2">
              <ul class="list-disc list-inside">
                <li *ngFor="let item of order.orderItems">
                  {{ item.itemName }} x {{ item.quantity }} = ${{ item.total }}
                </li>
              </ul>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
